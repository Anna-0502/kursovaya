<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>–°–ø—Ä–∞–≤–∫–∞ –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±—É—á–µ–Ω–∏—è</title>
        <link rel="stylesheet" href="/static/css/style.css" />
    </head>
    <body>
        <header class="header">
            <div class="container">
                <div class="logo">
                    <a href="/">–ù–ì–¢–£<span>–ê–ª–µ–∫—Å–µ–µ–≤–∞</span></a>
                </div>
            </div>
        </header>

        <main class="main">
            <div class="container">
                <div class="form-header">
                    <h1 class="page-title">–°–ø—Ä–∞–≤–∫–∞ –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±—É—á–µ–Ω–∏—è</h1>
                    <p class="form-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏ –æ —Ç–µ–∫—É—â–µ–º —Å—Ç–∞—Ç—É—Å–µ –æ–±—É—á–µ–Ω–∏—è</p>
                </div>

                <div class="form-container">
                    <form class="application-form">
                        <!-- –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                        <div class="form-section">
                            <h3 class="section-title">üë§ –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="lastname">–§–∞–º–∏–ª–∏—è</label>
                                    <input type="text" id="lastname" name="lastname" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Ñ–∞–º–∏–ª–∏—é" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="firstname">–ò–º—è</label>
                                    <input type="text" id="firstname" name="firstname" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="middlename">–û—Ç—á–µ—Å—Ç–≤–æ</label>
                                    <input type="text" id="middlename" name="middlename" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –æ—Ç—á–µ—Å—Ç–≤–æ">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="student_id">–ù–æ–º–µ—Ä —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞</label>
                                    <input type="text" id="student_id" name="student_id" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1234567" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="institute">–ò–Ω—Å—Ç–∏—Ç—É—Ç</label>
                                    <select id="institute" name="institute" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç–∏—Ç—É—Ç</option>
                                        <option value="1">–ò–†–ò–¢</option>
                                        <option value="2">–ò–¢–°</option>
                                        <option value="3">–ò–§–•–¢–∏–ú</option>
                                        <option value="4">–ò–Ø–≠–∏–¢–§</option>
                                        <option value="5">–ò–ù–≠–£</option>
                                        <option value="6">–ò–ü–¢–ú</option>
                                        <option value="7">–ò–ù–≠–õ</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="group">–ù–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã</label>
                                    <input type="text" id="group" name="group" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 24-–ü–ú-2" required>
                                </div>
                            </div>
                        </div>

                        <!-- –î–∞–Ω–Ω—ã–µ –æ —Å–ø—Ä–∞–≤–∫–µ -->
                        <div class="form-section">
                            <h3 class="section-title">üìÑ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ø—Ä–∞–≤–∫–∏</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="certificate_type">–¢–∏–ø —Å–ø—Ä–∞–≤–∫–∏</label>
                                    <select id="certificate_type" name="certificate_type" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å–ø—Ä–∞–≤–∫–∏</option>
                                        <option value="basic">–ë–∞–∑–æ–≤–∞—è —Å–ø—Ä–∞–≤–∫–∞ –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±—É—á–µ–Ω–∏—è</option>
                                        <option value="detailed">–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫—É—Ä—Å–µ –∏ —Ñ–æ—Ä–º–µ –æ–±—É—á–µ–Ω–∏—è</option>
                                        <option value="with_gpa">–°–ø—Ä–∞–≤–∫–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ä–µ–¥–Ω–µ–≥–æ –±–∞–ª–ª–∞</option>
                                        <option value="for_visa">–°–ø—Ä–∞–≤–∫–∞ –¥–ª—è –ø–æ—Å–æ–ª—å—Å—Ç–≤–∞ (–≤–∏–∑–∞)</option>
                                        <option value="for_work">–°–ø—Ä–∞–≤–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="language">–Ø–∑—ã–∫ —Å–ø—Ä–∞–≤–∫–∏</label>
                                    <select id="language" name="language" required>
                                        <option value="russian">–†—É—Å—Å–∫–∏–π</option>
                                        <option value="english">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                                        <option value="both">–†—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="copies">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤</label>
                                    <select id="copies" name="copies" required>
                                        <option value="1">1 —ç–∫–∑–µ–º–ø–ª—è—Ä</option>
                                        <option value="2">2 —ç–∫–∑–µ–º–ø–ª—è—Ä–∞</option>
                                        <option value="3">3 —ç–∫–∑–µ–º–ø–ª—è—Ä–∞</option>
                                        <option value="more">–ë–æ–ª–µ–µ 3 (—É—Ç–æ—á–Ω–∏—Ç—å –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="purpose">–¶–µ–ª—å –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏</label>
                                <select id="purpose" name="purpose" required>
                                    <option value="">–£–∫–∞–∂–∏—Ç–µ —Ü–µ–ª—å –ø–æ–ª—É—á–µ–Ω–∏—è</option>
                                    <option value="visa">–î–ª—è –≤–∏–∑—ã</option>
                                    <option value="work">–î–ª—è —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</option>
                                    <option value="scholarship">–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∏–ø–µ–Ω–¥–∏–∏</option>
                                    <option value="transfer">–î–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π –í–£–ó</option>
                                    <option value="military">–î–ª—è –≤–æ–µ–Ω–∫–æ–º–∞—Ç–∞</option>
                                    <option value="other">–ò–Ω–∞—è —Ü–µ–ª—å</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="additional_info">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</label>
                                <textarea id="additional_info" name="additional_info" placeholder="–£–∫–∞–∂–∏—Ç–µ –ª—é–±—É—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç—Ä–∞–∂–µ–Ω–∞ –≤ —Å–ø—Ä–∞–≤–∫–µ..." rows="3"></textarea>
                            </div>
                        </div>

                        <!-- –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è -->
                        <div class="form-section">
                            <h3 class="section-title">üè¢ –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</h3>
                            <div class="delivery-options">
                                <div class="delivery-option">
                                    <input type="radio" id="pickup" name="delivery" value="pickup" checked>
                                    <label for="pickup">
                                        <span class="option-title">–°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –¥–∏—Ä–µ–∫—Ü–∏–∏</span>
                                        <span class="option-description">C—Ä–æ–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ 1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è</span>
                                    </label>
                                </div>
                                
                                <div class="delivery-option">
                                    <input type="radio" id="email" name="delivery" value="email">
                                    <label for="email">
                                        <span class="option-title">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞ email</span>
                                        <span class="option-description">–°—Ä–æ–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ 2-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-group email-field" style="display: none;">
                                <label for="email_address">Email –∞–¥—Ä–µ—Å</label>
                                <input type="email" id="email_address" name="email_address" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email">
                            </div>
                        </div>

                        <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
                        <div class="form-section">
                            <h3 class="section-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                                    <input type="tel" id="phone" name="phone" placeholder="+7 (XXX) XXX-XX-XX" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="contact_email">Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</label>
                                    <input type="email" id="contact_email" name="contact_email" placeholder="example@university.ru" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-notice">
                            <div class="notice-icon">üí°</div>
                            <p>–ü–æ—Å–ª–µ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–ª–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–æ–π—Ç–∏ –≤ –¥–µ–∫–∞–Ω–∞—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –∑–∞—è–≤–ª–µ–Ω–∏—è.</p>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn secondary" onclick="window.history.back()">–ù–∞–∑–∞–¥</button>
                            <button type="submit" class="btn primary">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —Å–ø—Ä–∞–≤–∫—É</button>
                        </div>
                    </form>
                    
                    <div class="form-info">
                        <div class="info-card">
                            <h3>üìã –û —Å–ø—Ä–∞–≤–∫–µ</h3>
                            <p>–°–ø—Ä–∞–≤–∫–∞ –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±—É—á–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤–∞—à —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ.</p>
                            <ul>
                                <li>–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫—É—Ä—Å–µ, —Ñ–æ—Ä–º–µ –∏ —Å—Ä–æ–∫–µ –æ–±—É—á–µ–Ω–∏—è</li>
                                <li>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ñ–∞–∫—Ç –æ–±—É—á–µ–Ω–∏—è –≤ –ù–ì–¢–£</li>
                                <li>–ú–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö</li>
                                <li>–ò–º–µ–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –ø–µ—á–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞</li>
                            </ul>
                        </div>
                        
                        <div class="info-card">
                            <h3>‚è±Ô∏è –°—Ä–æ–∫–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏</h3>
                            <ul>
                                <li>–ë–∞–∑–æ–≤–∞—è —Å–ø—Ä–∞–≤–∫–∞: 1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è</li>
                                <li>–°–ø—Ä–∞–≤–∫–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º: 2-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è</li>
                                <li>–°–ø—Ä–∞–≤–∫–∞ –¥–ª—è –≤–∏–∑—ã: 3-5 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π</li>
                                <li>–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ —Å GPA: 2-4 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è</li>
                            </ul>
                        </div>
                        
                        <div class="info-card warning">
                            <h3>‚ö†Ô∏è –í–∞–∂–Ω–æ</h3>
                            <ul>
                                <li>–ü—Ä–∏ —Å–µ–±–µ –∏–º–µ—Ç—å —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π –±–∏–ª–µ—Ç</li>
                                <li>–°–ø—Ä–∞–≤–∫–∞ –≤—ã–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤—É—é—â–∏–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º</li>
                                <li>–ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–∫–∏</li>
                                <li>–î–ª—è –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –∏–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 –ù–ì–¢–£ –∏–º. –ê–ª–µ–∫—Å–µ–µ–≤–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </footer>

        <!-- –¢–û–õ–¨–ö–û –û–î–ò–ù –ë–õ–û–ö –°–ö–†–ò–ü–¢–û–í -->
        <script src="{{ url_for('static', filename='js/api.js') }}"></script>
        <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
        <script src="{{ url_for('static', filename='js/database.js') }}"></script>
        <script src="{{ url_for('static', filename='js/requests.js') }}"></script>
        <script src="{{ url_for('static', filename='js/main.js') }}"></script>

        <script>
        document.querySelector('.application-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
            const deliveryMethod = document.querySelector('input[name="delivery"]:checked').value;
            const email = document.getElementById('email_address').value;
            
            if (deliveryMethod === 'email' && !email) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ email –∞–¥—Ä–µ—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å–ø—Ä–∞–≤–∫–∏.');
                return;
            }
            
            if (!authManager.isAuthenticated()) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É');
                authManager.showLoginModal();
                return;
            }

            const formData = new FormData(this);
            const requestData = {
                type: '–°–ø—Ä–∞–≤–∫–∞ –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±—É—á–µ–Ω–∏—è',
                formData: Object.fromEntries(formData),
                personalData: {
                    lastname: formData.get('lastname'),
                    firstname: formData.get('firstname'),
                    studentId: formData.get('student_id'),
                    institute: formData.get('institute'),
                    group: formData.get('group'),
                    certificateType: formData.get('certificate_type'),
                    language: formData.get('language'),
                    delivery: formData.get('delivery')
                }
            };

            const result = await requestsManager.createRequest(requestData);
            if (result) {
                alert('–ó–∞—è–≤–∫–∞ –Ω–∞ —Å–ø—Ä–∞–≤–∫—É –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±—É—á–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∞–Ω–∞!');
                setTimeout(() => { window.location.href = '/'; }, 2000);
            }
        });

        // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –ø–æ–ª—è email –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
        document.querySelectorAll('input[name="delivery"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const emailField = document.querySelector('.email-field');
                if (this.value === 'email') {
                    emailField.style.display = 'block';
                    document.getElementById('email_address').required = true;
                } else {
                    emailField.style.display = 'none';
                    document.getElementById('email_address').required = false;
                }
            });
        });

        // –ú–∞—Å–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        document.getElementById('phone').addEventListener('input', function(e) {
            let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
            e.target.value = '+7' + (x[2] ? ' (' + x[2] : '') + (x[3] ? ') ' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
        });
        </script>
    </body>
</html>