<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>–ó–∞—è–≤–ª–µ–Ω–∏–µ –≤ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç–ø—É—Å–∫</title>
        <link rel="stylesheet" href="/static/css/style.css" />
    </head>
    <body>
        <header class="header">
            <div class="container">
                <div class="logo">
                    <a href="index.html">–ù–ì–¢–£<span>–ê–ª–µ–∫—Å–µ–µ–≤–∞</span></a>
                </div>
            </div>
        </header>

        <main class="main">
            <div class="container">
                <div class="form-header">
                    <h1 class="page-title">–ó–∞—è–≤–ª–µ–Ω–∏–µ –≤ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç–ø—É—Å–∫</h1>
                    <p class="form-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–ø—É—Å–∫–∞</p>
                </div>

                <div class="form-container">
                    <form class="application-form">
                        <!-- –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                        <div class="form-section">
                            <h3 class="section-title">üìù –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="lastname">–§–∞–º–∏–ª–∏—è</label>
                                    <input type="text" id="lastname" name="lastname" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Ñ–∞–º–∏–ª–∏—é" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="firstname">–ò–º—è</label>
                                    <input type="text" id="firstname" name="firstname" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="middlename">–û—Ç—á–µ—Å—Ç–≤–æ</label>
                                    <input type="text" id="middlename" name="middlename" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –æ—Ç—á–µ—Å—Ç–≤–æ">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="institute">–ò–Ω—Å—Ç–∏—Ç—É—Ç</label>
                                    <select id="institute" name="institute" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç–∏—Ç—É—Ç</option>
                                        <option value="1">–ò–†–ò–¢</option>
                                        <option value="2">–ò–¢–°</option>
                                        <option value="3">–ò–§–•–¢–∏–ú</option>
                                        <option value="4">–ò–Ø–≠–∏–¢–§</option>
                                        <option value="5">–ò–ù–≠–£</option>
                                        <option value="6">–ò–ü–¢–ú</option>
                                        <option value="7">–ò–ù–≠–õ</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="group">–ù–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã</label>
                                    <input type="text" id="group" name="group" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 24-–ü–ú-2" required>
                                </div>
                            </div>
                        </div>

                        <!-- –î–∞–Ω–Ω—ã–µ –æ–± –æ—Ç–ø—É—Å–∫–µ -->
                        <div class="form-section">
                            <h3 class="section-title">üìÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–ø—É—Å–∫–∞</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="leave_type">–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–ø—É—Å–∫–∞</label>
                                    <select id="leave_type" name="leave_type" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É</option>
                                        <option value="medical">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è</option>
                                        <option value="family">–°–µ–º–µ–π–Ω—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞</option>
                                        <option value="pregnancy">–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å –∏ —Ä–æ–¥—ã</option>
                                        <option value="other">–ò–Ω—ã–µ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="start_date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ—Ç–ø—É—Å–∫–∞</label>
                                    <input type="date" id="start_date" name="start_date" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="duration">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
                                    <select id="duration" name="duration" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ä–æ–∫</option>
                                        <option value="6">6 –º–µ—Å—è—Ü–µ–≤</option>
                                        <option value="12">1 –≥–æ–¥</option>
                                        <option value="24">2 –≥–æ–¥–∞ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="reason">–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã</label>
                                <textarea id="reason" name="reason" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–ø—É—Å–∫–∞..." rows="4" required></textarea>
                            </div>
                        </div>

                        <!-- –î–æ–∫—É–º–µ–Ω—Ç—ã -->
                        <div class="form-section">
                            <h3 class="section-title">üìé –ü—Ä–∏–ª–∞–≥–∞–µ–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                            <div class="documents-list">
                                <div class="document-item">
                                    <input type="checkbox" id="doc1" name="documents" value="application">
                                    <label for="doc1">–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –∏–º—è —Ä–µ–∫—Ç–æ—Ä–∞</label>
                                </div>
                                <div class="document-item">
                                    <input type="checkbox" id="doc2" name="documents" value="medical_certificate">
                                    <label for="doc2">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)</label>
                                </div>
                                <div class="document-item">
                                    <input type="checkbox" id="doc3" name="documents" value="passport_copy">
                                    <label for="doc3">–ö–æ–ø–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞</label>
                                </div>
                                <div class="document-item">
                                    <input type="checkbox" id="doc4" name="documents" value="student_card">
                                    <label for="doc4">–ö–æ–ø–∏—è —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞</label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="additional_docs">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</label>
                                <textarea id="additional_docs" name="additional_docs" placeholder="–£–∫–∞–∂–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–ª–∞–≥–∞–µ–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã..." rows="2"></textarea>
                            </div>
                        </div>

                        <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
                        <div class="form-section">
                            <h3 class="section-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                                    <input type="tel" id="phone" name="phone" placeholder="+7 (XXX) XXX-XX-XX" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" name="email" placeholder="example@university.ru" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn secondary" onclick="window.history.back()">–ù–∞–∑–∞–¥</button>
                            <button type="submit" class="btn primary">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–ª–µ–Ω–∏–µ</button>
                        </div>
                    </form>
                    
                    <div class="form-info">
                        <div class="info-card">
                            <h3>‚è∞ –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <p>–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç–ø—É—Å–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º –ø–æ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º.</p>
                            <ul>
                                <li>–°—Ä–æ–∫ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è: 10 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π</li>
                                <li>–û—Ç–ø—É—Å–∫ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –ø—Ä–∏–∫–∞–∑–æ–º —Ä–µ–∫—Ç–æ—Ä–∞</li>
                                <li>–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ—Å—Ç–æ –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ</li>
                                <li>–í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏</li>
                            </ul>
                        </div>
                        
                        <div class="info-card warning">
                            <h3>‚ö†Ô∏è –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ</h3>
                            <ul>
                                <li>–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –¥–µ–∫–∞–Ω–∞—Ç</li>
                                <li>–ó–∞—è–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–æ –ª–∏—á–Ω–æ</li>
                                <li>–°—Ç—É–¥–µ–Ω—Ç—ã –Ω–∞ –±—é–¥–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å—Ç–∏–ø–µ–Ω–¥–∏—é –ø—Ä–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –ø–æ–∫–∞–∑–∞–Ω–∏—è—Ö</li>
                                <li>–í—ã–π—Ç–∏ –∏–∑ –æ—Ç–ø—É—Å–∫–∞ –º–æ–∂–Ω–æ –¥–æ—Å—Ä–æ—á–Ω–æ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 –ù–ì–¢–£ –∏–º. –ê–ª–µ–∫—Å–µ–µ–≤–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </footer>

        <!-- –¢–û–õ–¨–ö–û –û–î–ò–ù –ë–õ–û–ö –°–ö–†–ò–ü–¢–û–í -->
        <script src="js/database.js"></script>
        <script src="js/auth.js"></script>
        <script src="js/requests.js"></script>
        <script src="js/main.js"></script>

        <script>
        document.querySelector('.application-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–º–µ—á–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
            const checkedDocs = document.querySelectorAll('input[name="documents"]:checked');
            if (checkedDocs.length === 0) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–º–µ—Ç—å—Ç–µ –ø—Ä–∏–ª–∞–≥–∞–µ–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã');
                return;
            }
            
            if (!authManager.isAuthenticated()) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É');
                authManager.showLoginModal();
                return;
            }

            const formData = new FormData(this);
            const requestData = {
                type: '–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç–ø—É—Å–∫',
                formData: Object.fromEntries(formData),
                personalData: {
                    lastname: formData.get('lastname'),
                    firstname: formData.get('firstname'),
                    institute: formData.get('institute'),
                    group: formData.get('group'),
                    leaveType: formData.get('leave_type'),
                    startDate: formData.get('start_date'),
                    duration: formData.get('duration')
                }
            };

            const result = await requestsManager.createRequest(requestData);
            if (result) {
                alert('–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç–ø—É—Å–∫ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∞–Ω–æ!');
                setTimeout(() => { window.location.href = 'index.html'; }, 2000);
            }
        });

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã - —Å–µ–≥–æ–¥–Ω—è
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('start_date').min = today;
        </script>
    </body>
</html>