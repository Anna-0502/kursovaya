<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>–°–ø—Ä–∞–≤–∫–∞ –æ –ø–µ—Ä–∏–æ–¥–µ –æ–±—É—á–µ–Ω–∏—è</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <header class="header">
            <div class="container">
                <div class="logo">
                    <a href="index.html">–ù–ì–¢–£<span>–ê–ª–µ–∫—Å–µ–µ–≤–∞</span></a>
                </div>
            </div>
        </header>

        <main class="main">
            <div class="container">
                <div class="form-header">
                    <h1 class="page-title">–°–ø—Ä–∞–≤–∫–∞ –æ –ø–µ—Ä–∏–æ–¥–µ –æ–±—É—á–µ–Ω–∏—è</h1>
                    <p class="form-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏</p>
                </div>

                <div class="form-container">
                    <form class="application-form">
                        <div class="form-group">
                            <label for="lastname">–§–∞–º–∏–ª–∏—è</label>
                            <input type="text" id="lastname" name="lastname" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Ñ–∞–º–∏–ª–∏—é" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="firstname">–ò–º—è</label>
                            <input type="text" id="firstname" name="firstname" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="middlename">–û—Ç—á–µ—Å—Ç–≤–æ</label>
                            <input type="text" id="middlename" name="middlename" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –æ—Ç—á–µ—Å—Ç–≤–æ">
                        </div>
                        
                        <div class="form-group">
                            <label for="institute">–ò–Ω—Å—Ç–∏—Ç—É—Ç</label>
                            <select id="institute" name="institute" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç–∏—Ç—É—Ç</option>
                                <option value="1">–ò–†–ò–¢</option>
                                <option value="2">–ò–¢–°</option>
                                <option value="3">–ò–§–•–¢–∏–ú</option>
                                <option value="4">–ò–Ø–≠–∏–¢–§</option>
                                <option value="5">–ò–ù–≠–£</option>
                                <option value="6">–ò–ü–¢–ú</option>
                                <option value="7">–ò–ù–≠–õ</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="group">–ù–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã</label>
                            <input type="text" id="group" name="group" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 24-–ü–ú-2" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="purpose">–¶–µ–ª—å –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏</label>
                            <textarea id="purpose" name="purpose" placeholder="–£–∫–∞–∂–∏—Ç–µ, –¥–ª—è –∫–∞–∫–∏—Ö —Ü–µ–ª–µ–π —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∫–∞..." rows="3"></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn secondary" onclick="window.history.back()">–ù–∞–∑–∞–¥</button>
                            <button type="submit" class="btn primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                        </div>
                    </form>
                    
                    <div class="form-info">
                        <div class="info-card">
                            <h3>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø—Ä–∞–≤–∫–µ</h3>
                            <p>–°–ø—Ä–∞–≤–∫–∞ –æ –ø–µ—Ä–∏–æ–¥–µ –æ–±—É—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Å–µ–º–µ—Å—Ç—Ä–∞—Ö, —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏ –∏ —Ç–µ–∫—É—â–µ–º —Å—Ç–∞—Ç—É—Å–µ –æ–±—É—á–µ–Ω–∏—è.</p>
                            <ul>
                                <li>–°—Ä–æ–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏: 3-5 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π</li>
                                <li>–í—ã–¥–∞–µ—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ü–∏–∏</li>
                                <li>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 –ù–ì–¢–£ –∏–º. –ê–ª–µ–∫—Å–µ–µ–≤–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </footer>

        <!-- –¢–û–õ–¨–ö–û –û–î–ò–ù –ë–õ–û–ö –°–ö–†–ò–ü–¢–û–í -->
        <script src="js/database.js"></script>
        <script src="js/auth.js"></script>
        <script src="js/requests.js"></script>
        <script src="js/main.js"></script>

        <script>
        document.querySelector('.application-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!authManager.isAuthenticated()) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É');
                authManager.showLoginModal();
                return;
            }

            const formData = new FormData(this);
            const requestData = {
                type: '–°–ø—Ä–∞–≤–∫–∞ –æ –ø–µ—Ä–∏–æ–¥–µ –æ–±—É—á–µ–Ω–∏—è',
                formData: Object.fromEntries(formData),
                personalData: {
                    lastname: formData.get('lastname'),
                    firstname: formData.get('firstname'),
                    institute: formData.get('institute'),
                    group: formData.get('group')
                }
            };

            const result = await requestsManager.createRequest(requestData);
            if (result) {
                alert('–ó–∞—è–≤–∫–∞ –Ω–∞ —Å–ø—Ä–∞–≤–∫—É —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
                setTimeout(() => { window.location.href = 'index.html'; }, 2000);
            }
        });
        </script>
    </body>
</html>